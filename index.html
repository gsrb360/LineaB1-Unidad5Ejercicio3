<!DOCTYPE html>
<html>
<meta charset="utf-8" />

<head>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>

	<style>
		#map {
			width: 100%;
			height: 900px;
			box-shadow: 5px 5px 5px #888;
		}

		.info {
			padding: 6px 8px;
			font: 14px/16px Arial, Helvetica, sans-serif;
			background: white;
			background: rgba(255, 255, 255, 0.8);
			box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
			border-radius: 5px;
			text-align: center;
		}

		.info h2 {
			margin: 0 0 5px;
			color: #777;
		}

		.legend {
			opacity: 0.8;
		}
	</style>


</head>

<body>

	<div id="map"></div>

	<script>

		var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>'
				+ 'contributors',
			maxZoom: 18
		});

		var googleSat = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
			maxZoom: 20,
			subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
		});

		var paises = L.tileLayer.wms("http://localhost:8080/geoserver/wms", {
			layers: 'paises',
			format: 'image/png',
			transparent: true,
			attribution: "Natural Earth",
		});

		var hidrografias = L.tileLayer.wms("http://localhost:8080/geoserver/wms", {
			layers: 'hidrografias',
			format: 'image/png',
			transparent: true,
			attribution: "Natural Earth",
		});

		var ciudades = L.tileLayer.wms("http://localhost:8080/geoserver/wms", {
			layers: 'ciudades',
			format: 'image/png',
			transparent: true,
			attribution: "Natural Earth",
		});

		var rutas = L.tileLayer.wms("http://localhost:8080/geoserver/wms", {
			layers: 'rutas',
			format: 'image/png',
			transparent: true,
			attribution: "Natural Earth",
		});

		var paises_contag = L.tileLayer.wms("http://localhost:8080/geoserver/wms", {
			layers: 'v_paisescontag',
			format: 'image/png',
			transparent: true,
			attribution: "Natural Earth",
		});

		var map = L.map('map', {
			center: [41.66, -4.72],
			zoom: 3,
			layers: [osm, googleSat, paises, paises_contag, hidrografias, rutas, ciudades],
			scrollWheelZoom: true
		});

		L.control.scale({
			position: 'bottomright',
			imperial: false
		}).addTo(map);
		
		var title = L.control();
		title.onAdd = function (map) {
			var div = L.DomUtil.create('div', 'info');
			div.innerHTML += '<h2>Ruta de contagio Covid19</h2>Paises afectados';
			return div;
		};
		title.addTo(map);

		var baseMaps = {
			"Google Satelite": googleSat
		};
		var overlayMaps = {
			"<img src='https://cdn-icons-png.flaticon.com/512/2947/2947656.png' height=15px, width=15px /> Paises": paises,
			"<img src='https://cdn-icons-png.flaticon.com/512/2750/2750761.png' height=15px, width=15px /> Paises Contagiados": paises_contag,
			"<img src='https://cdn-icons.flaticon.com/png/512/4765/premium/4765768.png?token=exp=1654659785~hmac=46072a5ae4cb62a0ebb3b00eed494946' height=15px, width=15px /> Hidrografia": hidrografias,
			"<img src='https://cdn-icons-png.flaticon.com/512/608/608686.png' height=15px, width=15px /> Rutas": rutas,
			"<img src='https://cdn-icons.flaticon.com/png/512/1823/premium/1823951.png?token=exp=1654659842~hmac=36438cca34be541b871278d64aeb9349' height=15px, width=15px /> Ciudades": ciudades
		};

		L.control.layers(baseMaps, overlayMaps, {collapsed:true}).addTo(map);

		var legend = L.control({ position: 'bottomright' });
		legend.onAdd = function (map) {
			var div = L.DomUtil.create('div', 'info legend');
			div.innerHTML +=
				'<img src="http://localhost:8080/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=30&HEIGHT=30&LAYER=Ejercicio_3" alt="legend" width="100" height="350">';
			return div;
		};
		legend.addTo(map);

	</script>
	
</body>

</html>
